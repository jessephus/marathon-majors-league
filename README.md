# Fantasy NY Marathon

**Turn marathon watching into the ultimate competitive experience!**

Experience the thrill of the New York City Marathon like never before with this interactive fantasy game. Build your dream team of elite runners within a $30,000 salary cap, then watch them compete for glory through the five boroughs of New York City.

<img width="1536" height="1024" alt="AI generated image depicting a Ugandan athlete finishing a marathon with a Marathon Majors Fantasy League graphic on his racing singlet." src="https://github.com/user-attachments/assets/c66852b6-3087-4335-9be5-dd16ee4ed431" />

## What's New in the New York Release

This major release transforms the fantasy marathon experience with a complete overhaul:

### Daily Fantasy Style Gameplay
No more waiting for friends to submit rankings - jump right in and build your team! Choose any 3 men and 3 women within your $30,000 salary cap. Star athletes cost more, but savvy picks of undervalued runners can lead to victory.

<img src="https://private-user-images.githubusercontent.com/6133249/508751643-9d780e7c-da50-4c8b-af69-52c6af9efb6d.png?jwt=eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJpc3MiOiJnaXRodWIuY29tIiwiYXVkIjoicmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbSIsImtleSI6ImtleTUiLCJleHAiOjE3NjIxODgzNTEsIm5iZiI6MTc2MjE4ODA1MSwicGF0aCI6Ii82MTMzMjQ5LzUwODc1MTY0My05ZDc4MGU3Yy1kYTUwLTRjOGItYWY2OS01MmM2YWY5ZWZiNmQucG5nP1gtQW16LUFsZ29yaXRobT1BV1M0LUhNQUMtU0hBMjU2JlgtQW16LUNyZWRlbnRpYWw9QUtJQVZDT0RZTFNBNTNQUUs0WkElMkYyMDI1MTEwMyUyRnVzLWVhc3QtMSUyRnMzJTJGYXdzNF9yZXF1ZXN0JlgtQW16LURhdGU9MjAyNTExMDNUMTY0MDUxWiZYLUFtei1FeHBpcmVzPTMwMCZYLUFtei1TaWduYXR1cmU9YTYzZWJlODNmYjI2NmUxYmFiY2YxYTI3YzU4ZWVhOTg3ZTRhODYxYjBkOGFmY2U1OWM5OTFkYjkyOGNlYzExZiZYLUFtei1TaWduZWRIZWFkZXJzPWhvc3QifQ.3BUoFsqEQ51zDbm4mU4ezILZFUlOkJnQEcCe85XkBf4" alt="Screenshot of account-free team creation showing unique session URL generation and bookmark instructions without any login form or password fields" width="250">&nbsp;
&nbsp;
<img src="https://private-user-images.githubusercontent.com/6133249/508751581-20a09088-b70c-4fa2-8049-739de8e7edf4.png?jwt=eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJpc3MiOiJnaXRodWIuY29tIiwiYXVkIjoicmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbSIsImtleSI6ImtleTUiLCJleHAiOjE3NjIxODgzNTEsIm5iZiI6MTc2MjE4ODA1MSwicGF0aCI6Ii82MTMzMjQ5LzUwODc1MTU4MS0yMGEwOTA4OC1iNzBjLTRmYTItODA0OS03MzlkZThlN2VkZjQucG5nP1gtQW16LUFsZ29yaXRobT1BV1M0LUhNQUMtU0hBMjU2JlgtQW16LUNyZWRlbnRpYWw9QUtJQVZDT0RZTFNBNTNQUUs0WkElMkYyMDI1MTEwMyUyRnVzLWVhc3QtMSUyRnMzJTJGYXdzNF9yZXF1ZXN0JlgtQW16LURhdGU9MjAyNTExMDNUMTY0MDUxWiZYLUFtei1FeHBpcmVzPTMwMCZYLUFtei1TaWduYXR1cmU9M2U5OTRhMWI4OWM2ZDZhZDAyMDllMGQ3YWI1ZjRmODY0MGNkYzY4YjYzZWE1YzEzMTljNDhlMmM1MWRiZGY4ZiZYLUFtei1TaWduZWRIZWFkZXJzPWhvc3QifQ.4HitfGgubTVwRsIMioKer7mx_LE3rPXAysk6W5ypE3Q" alt="Screenshot of athlete detail view showing athlete biographical and statistical information, race log, progression, and news" width="250">&nbsp;
&nbsp;
<img src="https://private-user-images.githubusercontent.com/6133249/508751531-b5b2f648-3bbc-42b7-bbfd-6900554dd377.png?jwt=eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJpc3MiOiJnaXRodWIuY29tIiwiYXVkIjoicmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbSIsImtleSI6ImtleTUiLCJleHAiOjE3NjIxODgwNzQsIm5iZiI6MTc2MjE4Nzc3NCwicGF0aCI6Ii82MTMzMjQ5LzUwODc1MTUzMS1iNWIyZjY0OC0zYmJjLTQyYjctYmJmZC02OTAwNTU0ZGQzNzcucG5nP1gtQW16LUFsZ29yaXRobT1BV1M0LUhNQUMtU0hBMjU2JlgtQW16LUNyZWRlbnRpYWw9QUtJQVZDT0RZTFNBNTNQUUs0WkElMkYyMDI1MTEwMyUyRnVzLWVhc3QtMSUyRnMzJTJGYXdzNF9yZXF1ZXN0JlgtQW16LURhdGU9MjAyNTExMDNUMTYzNjE0WiZYLUFtei1FeHBpcmVzPTMwMCZYLUFtei1TaWduYXR1cmU9ZTNkMzNkODBjYzUwYzhmZDY4YmIxZmYwY2JmMzU0ZGExZThiZWIwMWM1NTRiZWJkNGVmMjRlNzMxMjlmZjdhMiZYLUFtei1TaWduZWRIZWFkZXJzPWhvc3QifQ.n1GKU8gqcdSzOMg_WHj5fO31N4omnHRPqn6mrOqhJdc" alt="Screenshot of salary cap draft interface showing athlete cards with prices, budget tracker displaying remaining funds, and selected team roster with 3 men and 3 women" width="250">

### Zero Friction - No Accounts Needed
Create or join a game instantly. No email, no password, no hassle. Your unique URL is your ticket to come back and manage your team - just bookmark it and come back anytime.

### Live Race Day Action
Watch your team climb the leaderboard in real-time as the marathon unfolds. See detailed stats, split times, and point breakdowns for every athlete. The dedicated leaderboard view keeps you on the edge of your seat.

<img src="https://private-user-images.githubusercontent.com/6133249/508751716-40a732f6-21c8-4c06-86ab-3383a424f8db.png?jwt=eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJpc3MiOiJnaXRodWIuY29tIiwiYXVkIjoicmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbSIsImtleSI6ImtleTUiLCJleHAiOjE3NjIxODg2NTUsIm5iZiI6MTc2MjE4ODM1NSwicGF0aCI6Ii82MTMzMjQ5LzUwODc1MTcxNi00MGE3MzJmNi0yMWM4LTRjMDYtODZhYi0zMzgzYTQyNGY4ZGIucG5nP1gtQW16LUFsZ29yaXRobT1BV1M0LUhNQUMtU0hBMjU2JlgtQW16LUNyZWRlbnRpYWw9QUtJQVZDT0RZTFNBNTNQUUs0WkElMkYyMDI1MTEwMyUyRnVzLWVhc3QtMSUyRnMzJTJGYXdzNF9yZXF1ZXN0JlgtQW16LURhdGU9MjAyNTExMDNUMTY0NTU1WiZYLUFtei1FeHBpcmVzPTMwMCZYLUFtei1TaWduYXR1cmU9ZDRmY2NhYWU2YmUwZDExODliZTk5MWEwNzEyYTQ4MDU4MTQ2MTIyZjY2YTFkYzRjY2M5MTBkMGNlYmNjNmVjZCZYLUFtei1TaWduZWRIZWFkZXJzPWhvc3QifQ.D5G2y0Jnhsb0cSy-rcFGSSjIeKWi6g3Md0oUOS20P7M" alt="Screenshot of live leaderboard during race showing fantasy results with team rankings with point totals, athlete performance details, split times, and highlighted user position" width="250">&nbsp;
&nbsp;
<img src="https://private-user-images.githubusercontent.com/6133249/508751778-e51fe4a1-67e6-44ff-865d-9411b708dd2e.png?jwt=eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJpc3MiOiJnaXRodWIuY29tIiwiYXVkIjoicmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbSIsImtleSI6ImtleTUiLCJleHAiOjE3NjIxODg2NTUsIm5iZiI6MTc2MjE4ODM1NSwicGF0aCI6Ii82MTMzMjQ5LzUwODc1MTc3OC1lNTFmZTRhMS02N2U2LTQ0ZmYtODY1ZC05NDExYjcwOGRkMmUucG5nP1gtQW16LUFsZ29yaXRobT1BV1M0LUhNQUMtU0hBMjU2JlgtQW16LUNyZWRlbnRpYWw9QUtJQVZDT0RZTFNBNTNQUUs0WkElMkYyMDI1MTEwMyUyRnVzLWVhc3QtMSUyRnMzJTJGYXdzNF9yZXF1ZXN0JlgtQW16LURhdGU9MjAyNTExMDNUMTY0NTU1WiZYLUFtei1FeHBpcmVzPTMwMCZYLUFtei1TaWduYXR1cmU9MjBlMDEzMjIyZTAxMzQ0MDg1NDliZmE1ODFlNDY0NWI3OWQxODVlYTRmZDU5YTM0NDYzNzNjZWVjMWY3Nzk4OCZYLUFtei1TaWduZWRIZWFkZXJzPWhvc3QifQ.EGC1ow_lUG21D1t48mpFNobvASuwRm2c8fCl5KYOMdI" alt="Screenshot of live leaderboard during race showing actual race results with the fantasy points scored by each athlete" width="250">&nbsp;
&nbsp;
<img src="https://private-user-images.githubusercontent.com/6133249/508751871-4917083d-0ac0-4585-94bc-f112b6fa5ac2.png?jwt=eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJpc3MiOiJnaXRodWIuY29tIiwiYXVkIjoicmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbSIsImtleSI6ImtleTUiLCJleHAiOjE3NjIxODg2NTUsIm5iZiI6MTc2MjE4ODM1NSwicGF0aCI6Ii82MTMzMjQ5LzUwODc1MTg3MS00OTE3MDgzZC0wYWMwLTQ1ODUtOTRiYy1mMTEyYjZmYTVhYzIucG5nP1gtQW16LUFsZ29yaXRobT1BV1M0LUhNQUMtU0hBMjU2JlgtQW16LUNyZWRlbnRpYWw9QUtJQVZDT0RZTFNBNTNQUUs0WkElMkYyMDI1MTEwMyUyRnVzLWVhc3QtMSUyRnMzJTJGYXdzNF9yZXF1ZXN0JlgtQW16LURhdGU9MjAyNTExMDNUMTY0NTU1WiZYLUFtei1FeHBpcmVzPTMwMCZYLUFtei1TaWduYXR1cmU9ZThiMGQ3Mzc5N2UxMmQxMzgwY2QyZDc1ZjllNTc4Y2ZkMGNjZDI0ZWRmMjRlOGZhM2MwNTMyMmZiN2RkNGUyYyZYLUFtei1TaWduZWRIZWFkZXJzPWhvc3QifQ.KZ0Pf9XhQMm3rT03U-g1kRf_ervqpmmNpkStmcs3W94" alt="Screenshot of athlete scoring detail view page showing an explanation of the athlete's fantasy scoring" width="250">

### Commissioner Power Tools
Enter live race updates with our streamlined interface. Track positions, split times, and final results. Semi-automated data entry makes managing race day a breeze.

### Advanced Athlete Management
Commissioners can add new athletes, update World Athletics IDs, confirm race participants, and manage the entire athlete database through an intuitive admin interface.


## Key Features

- **Salary Cap Draft**: Build your team within a $30,000 budget - choose wisely!
- **No Registration Required**: Share a link, start playing - it's that simple
- **Points-Based Scoring**: Placement points, time bonuses, and performance rewards
- **Live Updates**: Real-time leaderboard tracking throughout race day
- **Mobile-Optimized**: Perfect for following the race from anywhere
- **Commissioner Tools**: Easy game management and result entry
- **Auto-Sync Athletes**: Top 100 marathoners updated automatically from World Athletics
- **Strategic Gameplay**: Balance star power with budget constraints
- **Secure Sessions**: 90-day session tokens keep your team safe
- **Roster Lock**: Teams automatically lock at race start time

## How to Play

### Creating Your Team

1. **Get Your Unique Link**
   - Visit the game and click **"Create Team"** or use a commissioner-shared link
   - Your browser automatically saves your session - just bookmark the page
   - No email or password needed!

2. **Build Your Team ($30,000 Budget)**
   - Browse all confirmed athletes for the race
   - Select exactly 3 men and 3 women
   - Athletes have different salaries based on their ranking and performance
   - Watch your budget tracker to stay under $30,000
   - Submit when you're happy with your lineup

3. **Race Day**
   - Return to your bookmarked link to watch live results
   - Check the **Leaderboard** to see how you stack up
   - Watch your team's total points climb with each finish
   - See detailed breakdowns of placement points, time bonuses, and performance rewards

### For Commissioners

1. **Create a Game**
   - Click **"Commissioner Mode"** and get your unique commissioner URL
   - Set up the race details and confirm participating athletes
   - Share the game link with friends to let them create teams

2. **Manage Race Results**
   - Use the **Results Entry** interface during the race
   - Enter finish times and positions as athletes complete the course
   - Update throughout the race for live standings
   - Finalize results when the race is complete

3. **Admin Tools**
   - Add or update athletes in the database
   - Confirm which athletes are participating in the race
   - Edit World Athletics IDs for accurate data syncing
   - Manage multiple games simultaneously


## Game Rules & Scoring

### Team Building

- **Budget**: $30,000 salary cap per team
- **Team Size**: Select exactly 3 men and 3 women (6 total athletes)
- **Athlete Salaries**: Based on world rankings and personal best times
  - Elite athletes (Top 10): $7,000 - $14,000
  - Mid-tier runners (11-50): $3,000 - $7,000
  - Value picks (50+): $1,500 - $3,000
- **Strategy**: Balance star power with value picks to maximize points within budget

### Points-Based Scoring

Your team earns points through multiple categories:

**1. Placement Points (Top 10 Finishes)**
- 1st place: 10 points
- 2nd place: 9 points
- 3rd place: 8 points
- ...down to 10th place: 1 point

**2. Time Gap Bonuses**
- Within 60 seconds of winner: +5 points
- Within 2 minutes: +4 points
- Within 3 minutes: +3 points
- Within 5 minutes: +2 points
- Within 10 minutes: +1 point

**3. Performance Bonuses**
- **Negative Split**: +2 points (second half faster than first)
- **Even Pace**: +1 point (consistent throughout)
- **Fast Finish Kick**: +1 point (strong final 5km)

**4. Record Bonuses**
- **World Record**: +15 points
- **Course Record**: +5 points

### How to Win

The team with the **highest total points** across all 6 athletes wins! Points are calculated automatically as results come in, and you can see detailed breakdowns for each athlete showing exactly how they earned their points.

### Fair Play

- **Roster Lock**: Teams lock automatically at race start time - no last-minute changes
- **Live Updates**: Commissioner enters results as the race progresses
- **Final Results**: Standings are locked once the commissioner finalizes results

For complete scoring details and examples, see the **[Points Scoring System Documentation](docs/POINTS_SCORING_SYSTEM.md)**.

## Quick Deploy to Vercel

### One-Click Deploy
[![Deploy with Vercel](https://vercel.com/button)](https://vercel.com/new/clone?repository-url=https://github.com/jessephus/marathon-majors-league)

### Manual Setup

1. **Fork this repository** to your GitHub account
2. **Create a Vercel account** at [vercel.com](https://vercel.com) (free tier available)
3. **Import your repository** in the Vercel dashboard
4. **Add Postgres database**:
   - Navigate to your project's **Integrations** tab
   - Search for and add the **Neon** integration
   - Follow prompts to create/connect a Neon Postgres database
   - Vercel automatically configures the `DATABASE_URL` environment variable
5. **Deploy** - Database schema and athletes data are automatically initialized
   - The build process creates database tables and seeds athletes
   - If build fails, the app will auto-initialize on first access
   - **Your game data persists across deployments** - no data loss!
6. **Share** your game URL with friends!

**Note:** The database schema is automatically created - no manual SQL execution needed!

### Local Development

```bash
# Clone the repository
git clone https://github.com/your-username/marathon-majors-league.git
cd marathon-majors-league

# Install dependencies
npm install

# Link to your Vercel project (one-time setup)
vercel link

# Pull environment variables from Vercel (includes DATABASE_URL)
vercel env pull

# Start local development server
vercel dev

# Open http://localhost:3000
```

## Technology

Built with modern web technologies for reliability and performance:

- **Frontend**: Fast, responsive design that works on all devices
- **Backend**: Serverless cloud functions for automatic scaling
- **Database**: Neon Postgres for reliable data storage
- **Hosting**: Vercel's global network for fast worldwide access
- **Auto-Updates**: Athlete database syncs from World Athletics every 2 days

For technical details, see the **[Architecture Guide](docs/ARCHITECTURE.md)**.

## Elite Athletes Database

The game features the world's best marathoners, automatically kept up-to-date:

- **Top 100 Men & Women**: Official World Athletics marathon rankings
- **Auto-sync every 2 days**: Always current with the latest rankings
- **Complete profiles**: Photos, personal bests, country, World Athletics rankings
- **Extended data**: Age, sponsor, season best performance
- **Race confirmation**: Commissioners can mark which athletes are racing

The database updates automatically via GitHub Actions, ensuring you're always drafting from the current elite field.

For technical details, see the **[Sync Top 100 Guide](docs/SYNC_TOP_100.md)**.

## Configuration

### Environment Variables
Required for deployment (automatically configured when using Neon integration):
```
DATABASE_URL=postgresql://username:password@host.neon.tech/dbname
```

### Game Settings
- **Multiple games**: Run several leagues simultaneously
- **Automatic roster lock**: Teams lock at race start time
- **Flexible scoring**: Points-based system with detailed breakdowns
- **Live updates**: Commissioner controls when results are published

## Additional Documentation

**[ðŸ“– Complete Documentation Index](docs/README.md)** - Find all documentation organized by topic and role

### Quick Links

- **[User Guide](docs/USER_GUIDE.md)** - Complete player and commissioner instructions  
- **[Salary Cap Draft Guide](docs/SALARY_CAP_DRAFT.md)** - Daily fantasy-style team building system
- **[Roster Lock Time Guide](docs/ROSTER_LOCK_TIME.md)** - Automatic roster locking at race time
- **[Deployment Guide](docs/DEPLOYMENT.md)** - Deploy your own instance to Vercel
- **[Development Guide](docs/DEVELOPMENT.md)** - Local development and code standards
- **[Database Guide](docs/DATABASE.md)** - Schema, initialization, and troubleshooting
- **[Sync Top 100 Guide](docs/SYNC_TOP_100.md)** - Automated World Athletics data sync
- **[Architecture Guide](docs/ARCHITECTURE.md)** - Technical architecture and design
- **[Changelog](docs/CHANGELOG.md)** - Version history and updates

## Contributing

Contributions are welcome! Please feel free to submit issues, feature requests, or pull requests.

### Development Setup
1. Fork the repository
2. Follow the local development setup above
3. Make your changes
4. Test thoroughly with multiple players
5. Submit a pull request

## License

MIT License - See [LICENSE](LICENSE) file for details.

---

**Ready to make marathon watching unforgettable?** Deploy your own Fantasy NY Marathon game and let the competition begin!

